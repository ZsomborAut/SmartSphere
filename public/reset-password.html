<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>Új jelszó</title>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
  import { getAuth, verifyPasswordResetCode, confirmPasswordReset } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "API_KEY",
    authDomain: "PROJECT_ID.firebaseapp.com",
    projectId: "PROJECT_ID",
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Get oobCode from URL
  const params = new URLSearchParams(window.location.search);
  const oobCode = params.get("oobCode");

  if (!oobCode) {
    alert("Érvénytelen link!");
  }

  async function resetPassword() {
    const newPassword = document.getElementById("newPassword").value;
    try {
      await confirmPasswordReset(auth, oobCode, newPassword);
      alert("Jelszó sikeresen visszaállítva!");
    } catch(err) {
      alert(err.message);
    }
  }

  window.resetPassword = resetPassword;
</script>
</head>
<body>
<h2>Adj meg új jelszót</h2>
<input type="password" id="newPassword" placeholder="Új jelszó">
<button onclick="resetPassword()">Mentés</button>
</body>
</html>
